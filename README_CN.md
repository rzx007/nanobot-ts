# nanobot-ts

è¶…è½»é‡çº§ä¸ªäºº AI åŠ©æ‰‹ - TypeScript å®ç°

## ğŸ¯ æ¦‚è¿°

nanobot-ts æ˜¯ [nanobot](https://github.com/HKUDS/nanobot) çš„ TypeScript ç‰ˆæœ¬ï¼Œä¸€ä¸ªè¶…è½»é‡çº§çš„ä¸ªäºº AI åŠ©æ‰‹æ¡†æ¶ã€‚

### ä¸»è¦ç‰¹æ€§

- ğŸª¶ **è½»é‡çº§**: çº¦ 5000 è¡Œ TypeScript ä»£ç 
- ğŸš€ **å¿«é€Ÿ**: åŸºäº Node.js éé˜»å¡ I/O
- ğŸ”Œ **å¤šæ¸ é“**: WhatsAppã€é£ä¹¦ã€é‚®ç®±ã€CLI
- ğŸ§  **æ™ºèƒ½**: LLM é©±åŠ¨ï¼Œæ”¯æŒå·¥å…·è°ƒç”¨
- ğŸ› ï¸ **å¯æ‰©å±•**: è½»æ¾æ·»åŠ è‡ªå®šä¹‰å·¥å…·å’Œæ¸ é“
- ğŸ” **å®‰å…¨**: åŸºäºé£é™©ç­‰çº§çš„å·¥å…·å®¡æ‰¹ç³»ç»Ÿ
- ğŸ”Œ **MCP æ”¯æŒ**: æ”¯æŒæ¨¡å‹ä¸Šä¸‹æ–‡åè®®æ‰©å±•å¤–éƒ¨å·¥å…·
- ğŸ¨ **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript æ”¯æŒå’Œ Zod éªŒè¯
- ğŸ¤– **AI SDK**: åŸºäº Vercel AI SDK
- ğŸ’¾ **è®°å¿†**: è‡ªåŠ¨ä¼šè¯æ•´åˆå’Œé•¿æœŸè®°å¿†

### ä¸ Python ç‰ˆæœ¬å¯¹æ¯”

| ç‰¹æ€§     | Python ç‰ˆæœ¬  | TypeScript ç‰ˆæœ¬               |
| -------- | ------------ | ----------------------------- |
| ä»£ç è¡Œæ•° | ~4,000       | ~5,000                        |
| è¿è¡Œç¯å¢ƒ | Python 3.11+ | Node.js 18+                   |
| ç±»å‹å®‰å…¨ | å¯é€‰         | âœ… å®Œæ•´                       |
| æ€§èƒ½     | è‰¯å¥½         | âœ… æ›´å¥½ï¼ˆå¼‚æ­¥ I/Oï¼‰           |
| ç”Ÿæ€     | PyPI         | âœ… npmï¼ˆæ›´å¤§ï¼‰                |
| æ¸ é“     | 9+           | 4 (WhatsApp, é£ä¹¦, é‚®ç®±, CLI) |
| LLM SDK  | LiteLLM      | âœ… Vercel AI SDK              |
| å®¡æ‰¹ç³»ç»Ÿ | âœ…           | âœ… åŸºäºé£é™©çš„å®¡æ‰¹             |
| MCP æ”¯æŒ | âœ…           | âœ… stdio + HTTP æœåŠ¡å™¨        |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-org/nanobot-ts.git
cd nanobot-ts

# å®‰è£…ä¾èµ–
pnpm install

# æ„å»ºé¡¹ç›®
pnpm run build
```

### åˆå§‹åŒ–

```bash
# è¿è¡Œåˆå§‹åŒ–å‘å¯¼
pnpm run init
```

è¿™å°†åˆ›å»ºï¼š

- `~/.nanobot/config.json` - é…ç½®æ–‡ä»¶
- `~/.nanobot/workspace/` - å·¥ä½œåŒºç›®å½•
- å·¥ä½œåŒºä¸­çš„æ¨¡æ¿æ–‡ä»¶

### é…ç½®

ç¼–è¾‘ `~/.nanobot/config.json`:

```json
{
  "agents": {
    "defaults": {
      "model": "openai:gpt-4o",
      "temperature": 0.1,
      "maxTokens": 8192,
      "maxIterations": 40,
      "memoryWindow": 100
    }
  },
  "providers": {
    "openai": {
      "apiKey": "sk-..."
    }
  },
  "channels": {
    "whatsapp": {
      "enabled": true,
      "allowFrom": ["+1234567890"]
    }
  },
  "tools": {
    "approval": {
      "enabled": true,
      "memoryWindow": 300,
      "timeout": 60
    }
  }
}
```

å¯¹äº MCP é…ç½®ï¼Œåˆ›å»º `~/.nanobot/workspace/mcp.json`:

```json
{
  "enabled": true,
  "servers": [
    {
      "name": "filesystem",
      "type": "stdio",
      "stdio": {
        "command": "npx",
        "args": ["-y", "@modelcontextprotocol/server-filesystem"],
        "env": {
          "FILESYSTEM_ALLOWED_DIRECTORIES": "/workspace"
        }
      }
    }
  ]
}
```

### è¿è¡Œ

```bash
# å¯åŠ¨ç½‘å…³ï¼ˆæ‰€æœ‰æ¸ é“ï¼‰
nanobot gateway

# å•æ¡æ¶ˆæ¯
nanobot chat "Hello!"

# äº¤äº’æ¨¡å¼
nanobot chat --interactive
```

## ğŸ’» CLI å‘½ä»¤

| å‘½ä»¤                                                 | æè¿°                                                       |
| ---------------------------------------------------- | ---------------------------------------------------------- |
| `nanobot init`                                       | åœ¨ `~/.nanobot` åˆå§‹åŒ–é…ç½®å’Œå·¥ä½œåŒºï¼Œä½¿ç”¨ `-f/--force` è¦†ç›– |
| `nanobot chat [prompt]`                              | å‘é€æç¤ºå¹¶è·å–å›å¤ï¼›æ·»åŠ  `-i/--interactive` è¿›å…¥äº¤äº’æ¨¡å¼   |
| `nanobot gateway`                                    | å¯åŠ¨æ¶ˆæ¯æ€»çº¿å’Œ Agentï¼ˆé»˜è®¤ç«¯å£ï¼š`--port 18790`ï¼‰           |
| `nanobot status`                                     | æŸ¥çœ‹é…ç½®å’Œè¿è¡ŒçŠ¶æ€                                         |
| `nanobot session`                                    | åˆ—å‡ºæ‰€æœ‰ä¼šè¯                                               |
| `nanobot config [key] [value]`                       | æŸ¥çœ‹æˆ–è®¾ç½®é…ç½®ï¼ˆä¾‹å¦‚ï¼š`agents.defaults.model`ï¼‰            |
| `nanobot channels status`                            | æ£€æŸ¥æ¸ é“çŠ¶æ€                                               |
| `nanobot logs`                                       | æŸ¥çœ‹æ—¥å¿—ï¼Œä½¿ç”¨ `-t/--tail <n>`ï¼ˆé»˜è®¤ 50ï¼‰                  |
| `nanobot whatsapp:auth`                              | WhatsApp äºŒç»´ç  / é…å¯¹ç ç™»å½•                               |
| `nanobot whatsapp:status`                            | æ£€æŸ¥ WhatsApp ç™»å½•çŠ¶æ€                                     |
| `nanobot whatsapp:logout`                            | æ¸…é™¤ WhatsApp å‡­æ®                                         |
| `nanobot mcp:list`                                   | åˆ—å‡ºå·²è¿æ¥çš„ MCP æœåŠ¡å™¨å’Œå·¥å…·                              |
| `nanobot mcp:tools`                                  | ä»¥ nanobot æ ¼å¼åˆ—å‡º MCP å·¥å…·                               |
| `nanobot mcp:test <serverName> <toolName> [args...]` | æµ‹è¯•ç‰¹å®š MCP å·¥å…·                                          |

### ç¤ºä¾‹

```bash
# åˆå§‹åŒ–æˆ–é‡æ–°åˆå§‹åŒ–
nanobot init
nanobot init --force

# ä¸ AI å¯¹è¯
nanobot chat "Help me write a Python function"
nanobot chat -i

# ä½¿ç”¨è‡ªå®šä¹‰ç«¯å£å¯åŠ¨ç½‘å…³
nanobot gateway --port 8080

# æ£€æŸ¥çŠ¶æ€
nanobot status
nanobot channels status

# æŸ¥çœ‹æ—¥å¿—
nanobot logs
nanobot logs --tail 100

# é…ç½®æ¨¡å‹
nanobot config get
nanobot config set agents.defaults.model openai:gpt-4o

# WhatsApp è®¤è¯
nanobot whatsapp:auth
nanobot whatsapp:auth --pairing-code --phone 86123456789
nanobot whatsapp:status
nanobot whatsapp:logout

# MCP æ“ä½œ
nanobot mcp:list
nanobot mcp:tools
nanobot mcp:test filesystem read_file '{"path":"~/test.txt"}'
```

### WhatsApp è®¤è¯

```bash
# ä½¿ç”¨äºŒç»´ç è®¤è¯ï¼ˆé»˜è®¤ï¼‰
nanobot whatsapp:auth

# ä½¿ç”¨é…å¯¹ç è®¤è¯
nanobot whatsapp:auth --pairing-code --phone 86123456789

# å¼ºåˆ¶é‡æ–°è®¤è¯
nanobot whatsapp:auth --force

# æ£€æŸ¥è®¤è¯çŠ¶æ€
nanobot whatsapp:status

# æ¸…é™¤è®¤è¯ï¼ˆç™»å‡ºï¼‰
nanobot whatsapp:logout
```

## ğŸ“¦ æ¶æ„

nanobot-ts é‡‡ç”¨ä»¥æ¶ˆæ¯æ€»çº¿ä¸ºæ ¸å¿ƒçš„äº‹ä»¶é©±åŠ¨æ¶æ„ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ç”¨æˆ·å±‚ï¼ˆæ¸ é“ï¼‰                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   CLI      â”‚  â”‚ WhatsApp   â”‚  â”‚  é£ä¹¦      â”‚  â”‚   é‚®ç®±    â”‚        â”‚
â”‚  â”‚  Channel   â”‚  â”‚  Channel   â”‚  â”‚  Channel   â”‚  â”‚  Channel   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                â”‚                â”‚                â”‚
         â–¼                â–¼                â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æ¶ˆæ¯æ€»çº¿ï¼ˆé˜Ÿåˆ—ç³»ç»Ÿï¼‰                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ å…¥ç«™é˜Ÿåˆ—ï¼šç”¨æˆ· â†’ Agent                                                â”‚
â”‚  â€¢ å‡ºç«™é˜Ÿåˆ—ï¼šAgent â†’ ç”¨æˆ·                                                â”‚
â”‚  â€¢ å®¡æ‰¹è¿‡æ»¤å™¨ï¼šæ‹¦æˆª yes/no å›å¤                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Agent Loopï¼ˆå¤„ç†å±‚ï¼‰                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Session    â”‚  â”‚    Memory    â”‚  â”‚    Skills    â”‚  â”‚   Context    â”‚ â”‚
â”‚  â”‚   Manager    â”‚  â”‚Consolidator  â”‚  â”‚   Loader    â”‚  â”‚   Builder    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Tool       â”‚  â”‚  Approval    â”‚  â”‚   Cron       â”‚  â”‚     MCP      â”‚ â”‚
â”‚  â”‚  Registry    â”‚  â”‚  Manager    â”‚  â”‚   Service    â”‚  â”‚   Manager    â”‚ â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚ â”‚
â”‚  â”‚ â€¢ æ–‡ä»¶å·¥å…·   â”‚  â”‚ â€¢ åŸºäºé£é™©   â”‚  â”‚ â€¢ å®šæ—¶ä»»åŠ¡   â”‚  â”‚ â€¢ stdio      â”‚ â”‚
â”‚  â”‚ â€¢ Shell      â”‚  â”‚ â€¢ è®°å¿†       â”‚  â”‚              â”‚  â”‚   æœåŠ¡å™¨    â”‚ â”‚
â”‚  â”‚ â€¢ Web        â”‚  â”‚ â€¢ æ¯å·¥å…·è¦†ç›– â”‚  â”‚              â”‚  â”‚ â€¢ HTTP       â”‚ â”‚
â”‚  â”‚ â€¢ æ¶ˆæ¯       â”‚  â”‚              â”‚  â”‚              â”‚  â”‚   æœåŠ¡å™¨    â”‚ â”‚
â”‚  â”‚ â€¢ åå°ä»»åŠ¡    â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚ â”‚
â”‚  â”‚ â€¢ MCP å·¥å…·   â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         LLM Provider (Vercel AI SDK)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   OpenAI   â”‚  â”‚ Anthropic  â”‚  â”‚ OpenRouter â”‚  â”‚   DeepSeek â”‚         â”‚
â”‚  â”‚   (GPT-4)  â”‚  â”‚  (Claude)  â”‚  â”‚ (æ‰€æœ‰æ¨¡å‹) â”‚  â”‚  (DeepSeek) â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

1. **æ¶ˆæ¯æ€»çº¿**: å¸¦æœ‰å…¥ç«™/å‡ºç«™é˜Ÿåˆ—çš„ä¸­å¿ƒå‘å¸ƒ/è®¢é˜…ç³»ç»Ÿ
2. **Agent Loop**: ä¸»å¤„ç†å¼•æ“ï¼Œå¤„ç† LLM äº¤äº’å’Œå·¥å…·æ‰§è¡Œ
3. **å·¥å…·æ³¨å†Œè¡¨**: ç®¡ç†å†…ç½®å·¥å…·å¹¶åŠ¨æ€åŠ è½½ MCP å·¥å…·
4. **å®¡æ‰¹ç®¡ç†å™¨**: åŸºäºé£é™©çš„å·¥å…·å®¡æ‰¹ï¼Œæ”¯æŒæ¸ é“ç‰¹å®šå¤„ç†å™¨
5. **ä¼šè¯ç®¡ç†å™¨**: ç®¡ç†å¯¹è¯çŠ¶æ€å’Œå†å²è®°å½•
6. **è®°å¿†æ•´åˆå™¨**: è‡ªåŠ¨ä¼šè¯æ‘˜è¦å’Œé•¿æœŸè®°å¿†
7. **æ¸ é“ç®¡ç†å™¨**: æ”¯æŒå¤šæ¸ é“çš„ç»Ÿä¸€æ¥å£

### å·¥å…·æ‰§è¡Œæµç¨‹

```
LLM å†³ç­– â†’ å·¥å…·æ³¨å†Œè¡¨ â†’ å®¡æ‰¹æ£€æŸ¥ â†’ æ‰§è¡Œ â†’ è¿”å›ç»“æœ
                                      â†“
                                ç”¨æˆ·å®¡æ‰¹
                                      â†“
                           ï¼ˆé€šè¿‡ CLI/WhatsApp/é£ä¹¦/é‚®ç®±ï¼‰
```

è¯¦ç»†çš„æ¶æ„å›¾å’Œæµç¨‹ï¼Œè¯·å‚é˜…ï¼š

- [Gateway æµç¨‹æ–‡æ¡£](docs/GATEWAY_FLOW.md)
- [Mermaid å›¾è¡¨](docs/GATEWAY_MERMAID.md)

## ğŸ”Œ æ¸ é“

### WhatsApp

- **åº“**: `baileys`
- **ç‰¹æ€§**: äºŒç»´ç ç™»å½•ã€é…å¯¹ç ç™»å½•ã€æ¶ˆæ¯å¤„ç†ã€åª’ä½“æ”¯æŒ

**è®¤è¯**:

```bash
# äºŒç»´ç ç™»å½•ï¼ˆé»˜è®¤ï¼‰
nanobot whatsapp:auth

# é…å¯¹ç ç™»å½•
nanobot whatsapp:auth --pairing-code --phone 86123456789

# å¼ºåˆ¶é‡æ–°è®¤è¯
nanobot whatsapp:auth --force

# æ£€æŸ¥è®¤è¯çŠ¶æ€
nanobot whatsapp:status

# æ¸…é™¤è®¤è¯ï¼ˆç™»å‡ºï¼‰
nanobot whatsapp:logout
```

**è®¤è¯æµç¨‹**:

1. è¿è¡Œ `nanobot whatsapp:auth`
2. ä½¿ç”¨æ‰‹æœºä¸Šçš„ WhatsApp æ‰«æäºŒç»´ç 
   - æ‰“å¼€ WhatsApp â†’ è®¾ç½® â†’ å…³è”è®¾å¤‡ â†’ å…³è”æ–°è®¾å¤‡
   - æˆ–ä½¿ç”¨é…å¯¹ç æ¨¡å¼
3. å‡­æ®ä¿å­˜åˆ° `~/.nanobot/whatsapp_auth/`
4. åœ¨é…ç½®ä¸­å¯ç”¨ WhatsApp å¹¶å¯åŠ¨ç½‘å…³

**è¶…æ—¶å¤„ç†**:

- **è‡ªåŠ¨é‡è¯•**: è¶…æ—¶æœ€å¤šè‡ªåŠ¨é‡è¯• 5 æ¬¡
- **æŒ‡æ•°é€€é¿**: 3ç§’ã€6ç§’ã€9ç§’ã€12ç§’ã€15ç§’çš„å»¶è¿Ÿ
- **é‡è¯•ä¿¡æ¯**: æ˜¾ç¤ºå½“å‰é‡è¯•æ¬¡æ•°å’Œå»¶è¿Ÿ

```bash
# ç¤ºä¾‹é‡è¯•è¾“å‡º
âš ï¸  äºŒç»´ç å·²è¶…æ—¶ï¼Œ3 ç§’åé‡è¯• (1/5)...
```

**å»ºè®®**: ä½¿ç”¨é…å¯¹ç æ¨¡å¼ä»¥è·å¾—æ›´å¥½çš„è¶…æ—¶å¤„ç†ï¼ˆæœ‰æ•ˆæœŸæ›´é•¿ï¼‰ã€‚

**é…ç½®**:

```json
{
  "channels": {
    "whatsapp": {
      "enabled": true,
      "allowFrom": ["+1234567890"],
      "usePairingCode": false,
      "phoneNumber": "86123456789"
    }
  }
}
```

### é£ä¹¦

- **åº“**: `@larksuiteoapi/node-sdk`
- **ç‰¹æ€§**: WebSocket é•¿è¿æ¥æ¥æ”¶æ¶ˆæ¯ï¼ŒAPI å‘é€æ¶ˆæ¯ï¼›æ— éœ€å…¬ç½‘ IP
- **é…ç½®è¯´æ˜**: è§ [é£ä¹¦æ¸ é“é…ç½®æŒ‡å—](docs/FEISHU.md)

```json
{
  "channels": {
    "feishu": {
      "enabled": true,
      "appId": "cli_xxx",
      "appSecret": "xxx",
      "encryptKey": "",
      "verificationToken": "",
      "allowFrom": []
    }
  }
}
```

### é‚®ç®±

- **åº“**: `imapflow` + `nodemailer`
- **ç‰¹æ€§**: IMAP è½®è¯¢ï¼ŒSMTP å‘é€

```json
{
  "channels": {
    "email": {
      "enabled": true,
      "imapHost": "imap.gmail.com",
      "imapUsername": "bot@gmail.com",
      "imapPassword": "app-password",
      "smtpHost": "smtp.gmail.com",
      "smtpUsername": "bot@gmail.com",
      "smtpPassword": "app-password",
      "fromAddress": "bot@gmail.com"
    }
  }
}
```

## ğŸ¤– LLM æä¾›å•†

æ”¯æŒçš„æä¾›å•†ï¼ˆåŸºäº Vercel AI SDKï¼‰ï¼š

- âœ… OpenAI (GPT-4, GPT-4o, GPT-3.5)
- âœ… Anthropic (Claude 3.5, Claude 3, Claude Opus)
- âœ… OpenRouterï¼ˆè®¿é—®æ‰€æœ‰æ¨¡å‹ï¼‰
- âœ… Google (Gemini 1.5)
- âœ… DeepSeek
- âœ… Groq
- âœ… ä»¥åŠæ›´å¤š...

## ğŸ› ï¸ å·¥å…·

### å†…ç½®å·¥å…·

| å·¥å…·          | æè¿°                         |
| ------------- | ---------------------------- |
| `read_file`   | è¯»å–æ–‡ä»¶å†…å®¹                 |
| `write_file`  | å†™å…¥æ–‡ä»¶                     |
| `edit_file`   | ç¼–è¾‘æ–‡ä»¶ä¸­çš„ç‰¹å®šè¡Œ           |
| `delete_file` | åˆ é™¤æ–‡ä»¶                     |
| `list_dir`    | åˆ—å‡ºç›®å½•å†…å®¹                 |
| `exec`        | æ‰§è¡Œ Shell å‘½ä»¤              |
| `web_search`  | æœç´¢ç½‘é¡µï¼ˆBrave Search APIï¼‰ |
| `web_fetch`   | è·å–ç½‘é¡µå†…å®¹                 |
| `message`     | å‘æŒ‡å®šæ¸ é“å‘é€æ¶ˆæ¯           |
| `spawn`       | ç”Ÿæˆåå°å­ Agent             |
| `cron`        | å®‰æ’å’Œç®¡ç† cron ä»»åŠ¡         |

### MCP å·¥å…·

è¿æ¥å¤–éƒ¨ MCPï¼ˆæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰æœåŠ¡å™¨ä»¥æ‰©å±• nanobot çš„èƒ½åŠ›ï¼š

- âœ… æ”¯æŒæœ¬åœ°ï¼ˆSTDIOï¼‰å’Œè¿œç¨‹ï¼ˆHTTPï¼‰æœåŠ¡å™¨
- âœ… å—ä¿æŠ¤ç«¯ç‚¹çš„ OAuth è®¤è¯
- âœ… è‡ªåŠ¨å·¥å…·åŠ è½½å’Œæ³¨å†Œ
- âœ… è¯¦è§ [MCP.md](MCP.md) é…ç½®è¯¦æƒ…

### å·¥å…·å®¡æ‰¹ç³»ç»Ÿ

åŸºäºé£é™©ç­‰çº§çš„å·¥å…·æ‰§è¡Œå®¡æ‰¹ç³»ç»Ÿï¼š

- **é«˜é£é™©**: å§‹ç»ˆéœ€è¦å®¡æ‰¹
- **ä¸­é£é™©**: æ£€æŸ¥å®¡æ‰¹è®°å¿†ï¼ˆå¯é…ç½®è¶…æ—¶ï¼‰
- **ä½é£é™©**: æ— éœ€å®¡æ‰¹
- **æ¯å·¥å…·è¦†ç›–**: æ¯ä¸ªå·¥å…·å¯è¦†ç›–é£é™©ç­‰çº§
- **ä¸¥æ ¼æ¨¡å¼**: æ‰€æœ‰éä½é£é™©å·¥å…·éƒ½éœ€è¦å®¡æ‰¹
- **æ¸ é“ç‰¹å®šå¤„ç†å™¨**: CLIã€WhatsAppã€é£ä¹¦ã€é‚®ç®±

é…ç½®ç¤ºä¾‹ï¼š

```json
{
  "tools": {
    "approval": {
      "enabled": true,
      "memoryWindow": 300,
      "timeout": 60,
      "strictMode": false,
      "toolOverrides": {
        "exec": { "requiresApproval": true }
      }
    }
  }
}
```

## ğŸ¨ å¼€å‘

```bash
# å¼€å‘æ¨¡å¼ï¼ˆç›‘å¬ï¼‰
pnpm dev

# æ„å»º
pnpm build

# è¿è¡Œæµ‹è¯•
pnpm test

# æµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡
pnpm test:coverage

# ä»£ç æ£€æŸ¥
pnpm lint

# æ ¼å¼åŒ–ä»£ç 
pnpm format

# ç±»å‹æ£€æŸ¥
pnpm typecheck
```

## ğŸ“Š é¡¹ç›®ç»“æ„

```
nanobot-ts/
â”œâ”€â”€ src/                    # æºä»£ç 
â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒ Agent é€»è¾‘
â”‚   â”œâ”€â”€ bus/                # æ¶ˆæ¯æ€»çº¿
â”‚   â”œâ”€â”€ channels/           # æ¸ é“å®ç°
â”‚   â”œâ”€â”€ tools/              # å·¥å…·ç³»ç»Ÿ
â”‚   â”œâ”€â”€ providers/          # LLM æä¾›å•†
â”‚   â”œâ”€â”€ config/             # é…ç½®
â”‚   â”œâ”€â”€ storage/            # å­˜å‚¨å±‚
â”‚   â”œâ”€â”€ cli/                # CLI å‘½ä»¤
â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”œâ”€â”€ templates/               # å·¥ä½œåŒºæ¨¡æ¿
â”œâ”€â”€ tests/                  # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ docs/                   # æ–‡æ¡£
â””â”€â”€ package.json
```

## ğŸ“š æ–‡æ¡£

- [Gateway æµç¨‹æ–‡æ¡£](docs/GATEWAY_FLOW.md) - è¯¦ç»†çš„æ¶ˆæ¯æµç¨‹å›¾
- [Mermaid å›¾è¡¨](docs/GATEWAY_MERMAID.md) - å¯è§†åŒ–æ¶æ„å›¾
- [é£ä¹¦æ¸ é“æŒ‡å—](docs/FEISHU.md) - é£ä¹¦æ¸ é“é…ç½®
- [MCP é…ç½®](MCP.md) - æ¨¡å‹ä¸Šä¸‹æ–‡åè®®è®¾ç½®

## ğŸ“„ è®¸å¯è¯

MIT

## ğŸ™ è‡´è°¢

- Python åŸå§‹ç‰ˆæœ¬: [HKUDS/nanobot](https://github.com/HKUDS/nanobot)
- AI SDK: [Vercel AI SDK](https://sdk.vercel.ai/)
- æµ‹è¯•æ¡†æ¶: [Vitest](https://vitest.dev/)
